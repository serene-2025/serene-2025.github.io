<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ใบรายงานอุบัติเหตุและประเมินความเสียหาย</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap');
        
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f3f4f6; /* สีพื้นหลังตอนดูบนจอ */
        }

        /* ตั้งค่าหน้ากระดาษ A4 */
        .a4-page {
            width: 210mm;
            min-height: 297mm;
            padding: 20mm;
            margin: 20px auto;
            background: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            position: relative;
        }

        /* เส้นบรรทัดสำหรับกรอกข้อมูล */
        input[type="text"], input[type="number"], input[type="date"], input[type="time"] {
            border: none;
            border-bottom: 1px dotted #000;
            width: 100%;
            outline: none;
            background: transparent;
            font-family: 'Sarabun', sans-serif;
            color: #000; /* สีหมึกพิมพ์ */
        }
        
        textarea {
            width: 100%;
            border: 1px dotted #ccc;
            outline: none;
            resize: none;
            background: transparent;
        }

        /* ตาราง */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid #000;
            padding: 8px;
            vertical-align: middle;
        }
        th {
            background-color: #f0f0f0;
            text-align: center;
        }

        /* คำสั่งเฉพาะตอนสั่งพิมพ์ (Print Mode) */
        @media print {
            body {
                background: white;
            }
            .a4-page {
                margin: 0;
                box-shadow: none;
                width: 100%;
                height: 100%;
                padding: 10mm; /* ปรับขอบกระดาษตอนพิมพ์ */
            }
            .no-print {
                display: none !important; /* ซ่อนปุ่มต่างๆ */
            }
            @page {
                size: A4;
                margin: 0;
            }
            /* บังคับให้พิมพ์สีพื้นหลังตารางออกมาด้วย */
            * {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>

    <div class="no-print fixed top-5 right-5 z-50 flex gap-2">
        <button onclick="window.print()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded shadow-lg flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z" clip-rule="evenodd" /></svg>
            พิมพ์ / บันทึก PDF
        </button>
    </div>

    <div class="a4-page text-sm">
        
        <div class="text-center mb-6">
            <h1 class="text-xl font-bold mb-1">ใบรายงานอุบัติเหตุและประเมินความเสียหายทรัพย์สิน</h1>
            <p class="text-gray-600">(ระบบไม้กั้นรถยนต์ / ระบบรักษาความปลอดภัย)</p>
        </div>

        <div class="flex justify-between mb-4">
            <div class="w-1/3">เลขที่เอกสาร: <input type="text" placeholder="ระบุเลขที่..." class="w-24 inline-block"></div>
            <div class="w-1/3 text-center">วันที่เกิดเหตุ: <input type="date" id="dateInput" class="w-32 inline-block"></div>
            <div class="w-1/3 text-right">เวลา: <input type="time" id="timeInput" class="w-24 inline-block"></div>
        </div>

        <div class="mb-4">
            <h2 class="font-bold bg-gray-200 px-2 py-1 mb-2">1. ข้อมูลผู้ประสบเหตุ / คู่กรณี</h2>
            <div class="grid grid-cols-2 gap-4 mb-2">
                <div>ชื่อ-นามสกุล: <input type="text" class="w-[70%]"></div>
                <div>เบอร์โทรศัพท์: <input type="text" class="w-[60%]"></div>
            </div>
            <div class="grid grid-cols-3 gap-4 mb-2">
                <div>ทะเบียนรถ: <input type="text" class="w-[60%]"></div>
                <div>จังหวัด: <input type="text" class="w-[60%]"></div>
                <div>ยี่ห้อ/รุ่น: <input type="text" class="w-[60%]"></div>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div>บริษัทประกันภัย: <input type="text" class="w-[60%]"></div>
                <div>เลขที่กรมธรรม์: <input type="text" class="w-[60%]"></div>
            </div>
        </div>

        <div class="mb-4">
            <h2 class="font-bold bg-gray-200 px-2 py-1 mb-2">2. รายละเอียดสถานที่และเหตุการณ์</h2>
            <div class="mb-2">
                <span class="font-semibold">จุดเกิดเหตุ:</span> 
                <label class="ml-2"><input type="checkbox"> ทางเข้าหมู่บ้าน</label>
                <label class="ml-4"><input type="checkbox"> ทางออกหมู่บ้าน</label>
                <label class="ml-4"><input type="checkbox"> อื่นๆ <input type="text" class="w-32 inline-block"></label>
            </div>
            <div>
                <span class="font-semibold">ลักษณะเหตุการณ์:</span>
                <textarea rows="3" class="w-full mt-1 p-1 border border-gray-300" placeholder="อธิบายเหตุการณ์... (เช่น ขับรถชนไม้กั้นขณะกำลังลง, ลมพัดแรงไม้กั้นตกใส่)"></textarea>
            </div>
        </div>

        <div class="mb-4">
            <h2 class="font-bold bg-gray-200 px-2 py-1 mb-2">3. รายการประเมินความเสียหาย</h2>
            <table>
                <thead>
                    <tr>
                        <th class="w-12">ลำดับ</th>
                        <th>รายการทรัพย์สิน</th>
                        <th class="w-1/3">ลักษณะความเสียหาย</th>
                        <th class="w-16">จำนวน</th>
                        <th class="w-1/4">หมายเหตุ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="text-center">1</td>
                        <td>แขนกั้น (ไม้กั้น)</td>
                        <td><input type="text"></td>
                        <td><input type="number" class="text-center"></td>
                        <td><input type="text"></td>
                    </tr>
                    <tr>
                        <td class="text-center">2</td>
                        <td>มอเตอร์ / ชุดเกียร์</td>
                        <td><input type="text"></td>
                        <td><input type="number" class="text-center"></td>
                        <td><input type="text"></td>
                    </tr>
                    <tr>
                        <td class="text-center">3</td>
                        <td>ตู้ควบคุม / ตัวถังตู้</td>
                        <td><input type="text"></td>
                        <td><input type="number" class="text-center"></td>
                        <td><input type="text"></td>
                    </tr>
                    <tr>
                        <td class="text-center">4</td>
                        <td>ระบบเซนเซอร์ (Loop/Photo)</td>
                        <td><input type="text"></td>
                        <td><input type="number" class="text-center"></td>
                        <td><input type="text"></td>
                    </tr>
                    <tr>
                        <td class="text-center">5</td>
                        <td>อื่นๆ <input type="text" class="w-24 inline border-b border-gray-400" placeholder="(ระบุ)"></td>
                        <td><input type="text"></td>
                        <td><input type="number" class="text-center"></td>
                        <td><input type="text"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="mb-6">
            <h2 class="font-bold bg-gray-200 px-2 py-1 mb-2">4. สรุปมูลค่าความเสียหายเบื้องต้น</h2>
            <div class="flex flex-col gap-2 items-end pr-10">
                <div class="w-1/2 flex justify-between">
                    <span>ค่าอะไหล่ / อุปกรณ์:</span>
                    <span><input type="number" id="costParts" class="w-32 text-right" oninput="calcTotal()"> บาท</span>
                </div>
                <div class="w-1/2 flex justify-between">
                    <span>ค่าแรงและดำเนินการ:</span>
                    <span><input type="number" id="costLabor" class="w-32 text-right" oninput="calcTotal()"> บาท</span>
                </div>
                <div class="w-1/2 flex justify-between font-bold border-t border-black pt-1">
                    <span>รวมทั้งสิ้น:</span>
                    <span id="grandTotal" class="w-32 text-right pr-8">0.00 บาท</span>
                </div>
            </div>
        </div>

        <div class="mt-8">
            <h2 class="font-bold bg-gray-200 px-2 py-1 mb-4">5. ลงชื่อยืนยันข้อมูล</h2>
            <div class="flex justify-between text-center gap-4">
                <div class="w-1/3">
                    <div class="h-16 border-b border-dotted border-black mb-2"></div>
                    <p>ลงชื่อ <input type="text" class="w-32 text-center" placeholder="(ผู้ขับขี่/คู่กรณี)"></p>
                    <p class="text-xs text-gray-500">ผู้ขับขี่ / คู่กรณี</p>
                </div>
                <div class="w-1/3">
                    <div class="h-16 border-b border-dotted border-black mb-2"></div>
                    <p>ลงชื่อ <input type="text" class="w-32 text-center" placeholder="(ตัวแทนหมู่บ้าน)"></p>
                    <p class="text-xs text-gray-500">ตัวแทนหมู่บ้าน / นิติบุคคล</p>
                </div>
                <div class="w-1/3">
                    <div class="h-16 border-b border-dotted border-black mb-2"></div>
                    <p>ลงชื่อ <input type="text" class="w-32 text-center" placeholder="(พยาน/รปภ.)"></p>
                    <p class="text-xs text-gray-500">พยาน / รปภ.</p>
                </div>
            </div>
        </div>

    </div>

    <script>
        // ตั้งค่าวันที่และเวลาปัจจุบันเมื่อโหลดหน้าเว็บ
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            document.getElementById('dateInput').valueAsDate = now;
            
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('timeInput').value = `${hours}:${minutes}`;
        });

        // ฟังก์ชันคำนวณราคารวม
        function calcTotal() {
            const parts = parseFloat(document.getElementById('costParts').value) || 0;
            const labor = parseFloat(document.getElementById('costLabor').value) || 0;
            const total = parts + labor;
            document.getElementById('grandTotal').innerText = total.toLocaleString('th-TH', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " บาท";
        }
    </script>
</body>
</html>
