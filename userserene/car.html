<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ - ‡∏ô‡∏¥‡∏ï‡∏¥‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Sarabun', sans-serif; }
        .loading { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        
        /* Modern animations */
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        .slide-up { animation: slideUp 0.6s ease-out; }
        .bounce-in { animation: bounceIn 0.8s ease-out; }
        .pulse-success { animation: pulseSuccess 0.6s ease-in-out; }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes pulseSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(34, 197, 94, 0.4); }
            100% { transform: scale(1); }
        }
        
        /* Glass morphism effect */
        .glass {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        /* Gradient backgrounds */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .gradient-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
        }
        
        /* Hover effects */
        .hover-lift {
            transition: all 0.3s ease;
        }
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
        }
        
        /* Success animation */
        .success-checkmark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: block;
            stroke-width: 2;
            stroke: #22c55e;
            stroke-miterlimit: 10;
            margin: 10px auto;
            box-shadow: inset 0px 0px 0px #22c55e;
            animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
        }
        
        .success-checkmark__circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 2;
            stroke-miterlimit: 10;
            stroke: #22c55e;
            fill: none;
            animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }
        
        .success-checkmark__check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }
        
        @keyframes stroke {
            100% {
                stroke-dashoffset: 0;
            }
        }
        
        @keyframes scale {
            0%, 100% {
                transform: none;
            }
            50% {
                transform: scale3d(1.1, 1.1, 1);
            }
        }
        
        @keyframes fill {
            100% {
                box-shadow: inset 0px 0px 0px 30px #22c55e;
            }
        }

        /* Search highlight */
        .highlight {
            background-color: #fef08a;
            padding: 1px 2px;
            border-radius: 2px;
            font-weight: 600;
        }

        /* Table row animations */
        .table-row-enter {
            animation: tableRowEnter 0.3s ease-out;
        }

        @keyframes tableRowEnter {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* No results animation */
        .no-results {
            animation: noResultsBounce 0.6s ease-out;
        }

        @keyframes noResultsBounce {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- Navigation -->
    <nav class="glass shadow-2xl mb-8 fade-in">
        <div class="container mx-auto px-6">
            <!-- Desktop Navigation -->
            <div class="hidden md:flex justify-between items-center py-6">
                <h1 class="text-3xl font-bold text-white drop-shadow-lg">üèòÔ∏è ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ</h1>
                <div class="flex space-x-4">
                    <button id="registerTab" class="px-6 py-3 bg-white bg-opacity-20 text-white rounded-xl font-medium hover-lift backdrop-blur-sm border border-white border-opacity-30 transition-all duration-300">üìù ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>
                    <button id="dashboardTab" class="px-6 py-3 bg-white bg-opacity-10 text-white rounded-xl font-medium hover-lift backdrop-blur-sm border border-white border-opacity-20 transition-all duration-300">üìä ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</button>
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            <div class="md:hidden py-6">
                <h1 class="text-2xl font-bold text-white drop-shadow-lg text-center mb-6">üèòÔ∏è ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ</h1>
                <div class="flex flex-col space-y-3">
                    <button id="registerTabMobile" class="w-full px-6 py-4 bg-white bg-opacity-20 text-white rounded-xl font-medium hover-lift backdrop-blur-sm border border-white border-opacity-30 transition-all duration-300 text-lg">üìù ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>
                    <button id="dashboardTabMobile" class="w-full px-6 py-4 bg-white bg-opacity-10 text-white rounded-xl font-medium hover-lift backdrop-blur-sm border border-white border-opacity-20 transition-all duration-300 text-lg">üìä ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4">
        <!-- Registration Form Section -->
        <div id="registerSection" class="max-w-4xl mx-auto slide-up">
            <div class="gradient-card rounded-3xl shadow-2xl p-10 mb-8 hover-lift border border-white border-opacity-20">
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full mb-4 shadow-2xl animate-pulse">
                        <span class="text-4xl">üöó</span>
                    </div>
                    <h2 class="text-4xl font-bold text-gray-800 mb-2 bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent">
                        ‚ú® ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡πÉ‡∏´‡∏°‡πà ‚ú®
                    </h2>
                    <p class="text-gray-600 text-lg">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏ñ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô</p>
                </div>
                
                <form id="vehicleForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="md:col-span-2 group">
                        <label class="block text-sm font-semibold text-gray-700 mb-3 flex items-center">
                            <span class="text-2xl mr-2">üë§</span>
                            ‡∏ä‡∏∑‡πà‡∏≠ ‡∏™‡∏Å‡∏∏‡∏• 
                            <span class="text-red-500 ml-1 text-lg animate-pulse">*</span>
                        </label>
                        <div class="relative">
                            <input type="text" id="fullName" required placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏≠‡∏ô‡∏∏‡∏ä‡∏≤" class="w-full px-5 py-4 pl-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white bg-opacity-80 backdrop-blur-sm group-hover:border-purple-300">
                            <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl">‚úçÔ∏è</span>
                        </div>
                    </div>
                    
                    <div class="group">
                        <label class="block text-sm font-semibold text-gray-700 mb-3 flex items-center">
                            <span class="text-2xl mr-2">üè†</span>
                            ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà 
                            <span class="text-red-500 ml-1 text-lg animate-pulse">*</span>
                        </label>
                        <div class="relative">
                            <input type="text" id="houseNumber" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 998/5" class="w-full px-5 py-4 pl-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white bg-opacity-80 backdrop-blur-sm group-hover:border-purple-300">
                            <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl">üèòÔ∏è</span>
                        </div>
                    </div>
                    
                    <div class="group">
                        <label class="block text-sm font-semibold text-gray-700 mb-3 flex items-center">
                            <span class="text-2xl mr-2">üì±</span>
                            ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ 
                            <span class="text-red-500 ml-1 text-lg animate-pulse">*</span>
                        </label>
                        <div class="relative">
                            <input type="tel" id="phoneNumber" required pattern="0[0-9]{8,9}" placeholder="‡πÄ‡∏ä‡πà‡∏ô 0812345678" class="w-full px-5 py-4 pl-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white bg-opacity-80 backdrop-blur-sm group-hover:border-purple-300">
                            <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl">‚òéÔ∏è</span>
                        </div>
                        <p class="text-xs text-gray-600 mt-2 font-medium flex items-center">
                            <span class="text-lg mr-1">üí°</span>
                            ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ 0
                        </p>
                    </div>
                    
                    <div class="md:col-span-2 group">
                        <label class="block text-sm font-semibold text-gray-700 mb-3 flex items-center">
                            <span class="text-2xl mr-2">üöô</span>
                            ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ 
                            <span class="text-red-500 ml-1 text-lg animate-pulse">*</span>
                        </label>
                        <div class="relative">
                            <select id="vehicleType" required class="w-full px-5 py-4 pl-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white bg-opacity-80 backdrop-blur-sm group-hover:border-purple-300 appearance-none">
                                <option value="">üîΩ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ</option>
                                <option value="‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå">üöó ‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå</option>
                                <option value="‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå">üèçÔ∏è ‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå</option>
                                <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">üöõ ‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                            </select>
                            <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl">üöò</span>
                            <span class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl pointer-events-none">‚¨áÔ∏è</span>
                        </div>
                    </div>
                    
                    <div class="group">
                        <label class="block text-sm font-semibold text-gray-700 mb-3 flex items-center">
                            <span class="text-2xl mr-2">üî¢</span>
                            ‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ 
                            <span class="text-red-500 ml-1 text-lg animate-pulse">*</span>
                        </label>
                        <div class="relative">
                            <input type="text" id="licensePlate" required placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏Ç1234" class="w-full px-5 py-4 pl-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white bg-opacity-80 backdrop-blur-sm group-hover:border-purple-300 font-mono text-center">
                            <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl">üè∑Ô∏è</span>
                        </div>
                    </div>
                    
                    <!-- New Province Field with Datalist -->
                    <div class="group">
                        <label class="block text-sm font-semibold text-gray-700 mb-3 flex items-center">
                            <span class="text-2xl mr-2">üìç</span>
                            ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î 
                            <span class="text-red-500 ml-1 text-lg animate-pulse">*</span>
                        </label>
                        <div class="relative">
                            <input type="text" id="province" required list="provinceList" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î" class="w-full px-5 py-4 pl-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white bg-opacity-80 backdrop-blur-sm group-hover:border-purple-300 text-center">
                            <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl">üó∫Ô∏è</span>
                            <datalist id="provinceList">
                                <option value="‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£">
                                <option value="‡∏Å‡∏£‡∏∞‡∏ö‡∏µ‡πà">
                                <option value="‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏ö‡∏∏‡∏£‡∏µ">
                                <option value="‡∏Å‡∏≤‡∏¨‡∏™‡∏¥‡∏ô‡∏ò‡∏∏‡πå">
                                <option value="‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£">
                                <option value="‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô">
                                <option value="‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ">
                                <option value="‡∏â‡∏∞‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏ó‡∏£‡∏≤">
                                <option value="‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ">
                                <option value="‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏ó">
                                <option value="‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥">
                                <option value="‡∏ä‡∏∏‡∏°‡∏û‡∏£">
                                <option value="‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢">
                                <option value="‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà">
                                <option value="‡∏ï‡∏£‡∏±‡∏á">
                                <option value="‡∏ï‡∏£‡∏≤‡∏î">
                                <option value="‡∏ï‡∏≤‡∏Å">
                                <option value="‡∏ô‡∏Ñ‡∏£‡∏ô‡∏≤‡∏¢‡∏Å">
                                <option value="‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°">
                                <option value="‡∏ô‡∏Ñ‡∏£‡∏û‡∏ô‡∏°">
                                <option value="‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤">
                                <option value="‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä">
                                <option value="‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå">
                                <option value="‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ">
                                <option value="‡∏ô‡∏£‡∏≤‡∏ò‡∏¥‡∏ß‡∏≤‡∏™">
                                <option value="‡∏ô‡πà‡∏≤‡∏ô">
                                <option value="‡∏ö‡∏∂‡∏á‡∏Å‡∏≤‡∏¨">
                                <option value="‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏±‡∏°‡∏¢‡πå">
                                <option value="‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ">
                                <option value="‡∏õ‡∏£‡∏∞‡∏à‡∏ß‡∏ö‡∏Ñ‡∏µ‡∏£‡∏µ‡∏Ç‡∏±‡∏ô‡∏ò‡πå">
                                <option value="‡∏õ‡∏£‡∏≤‡∏à‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ">
                                <option value="‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ">
                                <option value="‡∏û‡∏£‡∏∞‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤">
                                <option value="‡∏û‡∏∞‡πÄ‡∏¢‡∏≤">
                                <option value="‡∏û‡∏±‡∏á‡∏á‡∏≤">
                                <option value="‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á">
                                <option value="‡∏û‡∏¥‡∏à‡∏¥‡∏ï‡∏£">
                                <option value="‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å">
                                <option value="‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ">
                                <option value="‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå">
                                <option value="‡πÅ‡∏û‡∏£‡πà">
                                <option value="‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï">
                                <option value="‡∏°‡∏´‡∏≤‡∏™‡∏≤‡∏£‡∏Ñ‡∏≤‡∏°">
                                <option value="‡∏°‡∏∏‡∏Å‡∏î‡∏≤‡∏´‡∏≤‡∏£">
                                <option value="‡πÅ‡∏°‡πà‡∏Æ‡πà‡∏≠‡∏á‡∏™‡∏≠‡∏ô">
                                <option value="‡∏¢‡πÇ‡∏™‡∏ò‡∏£">
                                <option value="‡∏¢‡∏∞‡∏•‡∏≤">
                                <option value="‡∏£‡πâ‡∏≠‡∏¢‡πÄ‡∏≠‡πá‡∏î">
                                <option value="‡∏£‡∏∞‡∏ô‡∏≠‡∏á">
                                <option value="‡∏£‡∏∞‡∏¢‡∏≠‡∏á">
                                <option value="‡∏£‡∏≤‡∏ä‡∏ö‡∏∏‡∏£‡∏µ">
                                <option value="‡∏•‡∏û‡∏ö‡∏∏‡∏£‡∏µ">
                                <option value="‡∏•‡∏≥‡∏õ‡∏≤‡∏á">
                                <option value="‡∏•‡∏≥‡∏û‡∏π‡∏ô">
                                <option value="‡πÄ‡∏•‡∏¢">
                                <option value="‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©">
                                <option value="‡∏™‡∏Å‡∏•‡∏ô‡∏Ñ‡∏£">
                                <option value="‡∏™‡∏á‡∏Ç‡∏•‡∏≤">
                                <option value="‡∏™‡∏ï‡∏π‡∏•">
                                <option value="‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£">
                                <option value="‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°">
                                <option value="‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£">
                                <option value="‡∏™‡∏£‡∏∞‡πÅ‡∏Å‡πâ‡∏ß">
                                <option value="‡∏™‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏µ">
                                <option value="‡∏™‡∏¥‡∏á‡∏´‡πå‡∏ö‡∏∏‡∏£‡∏µ">
                                <option value="‡∏™‡∏∏‡πÇ‡∏Ç‡∏ó‡∏±‡∏¢">
                                <option value="‡∏™‡∏∏‡∏û‡∏£‡∏£‡∏ì‡∏ö‡∏∏‡∏£‡∏µ">
                                <option value="‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ">
                                <option value="‡∏™‡∏∏‡∏£‡∏¥‡∏ô‡∏ó‡∏£‡πå">
                                <option value="‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡∏≤‡∏¢">
                                <option value="‡∏´‡∏ô‡∏≠‡∏á‡∏ö‡∏±‡∏ß‡∏•‡∏≥‡∏†‡∏π">
                                <option value="‡∏≠‡πà‡∏≤‡∏á‡∏ó‡∏≠‡∏á">
                                <option value="‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡πÄ‡∏à‡∏£‡∏¥‡∏ç">
                                <option value="‡∏≠‡∏∏‡∏î‡∏£‡∏ò‡∏≤‡∏ô‡∏µ">
                                <option value="‡∏≠‡∏∏‡∏ï‡∏£‡∏î‡∏¥‡∏ï‡∏ñ‡πå">
                                <option value="‡∏≠‡∏∏‡∏ó‡∏±‡∏¢‡∏ò‡∏≤‡∏ô‡∏µ">
                                <option value="‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ">
                            </datalist>
                        </div>
                    </div>
                    
                    <div class="md:col-span-2 group">
                        <label class="block text-sm font-semibold text-gray-700 mb-3 flex items-center">
                            <span class="text-2xl mr-2">üì∏</span>
                            ‡∏†‡∏≤‡∏û‡∏£‡∏ñ 
                            <span class="text-red-500 ml-1 text-lg animate-pulse">*</span>
                        </label>
                        <div class="border-2 border-dashed border-purple-300 rounded-2xl p-8 text-center hover:border-purple-500 transition-all duration-300 bg-gradient-to-br from-purple-50 to-indigo-50 hover-lift group-hover:border-purple-400 group-hover:shadow-lg">
                            <input type="file" id="vehicleImage" accept="image/*" required class="hidden">
                            <div id="imageUploadArea" class="cursor-pointer" onclick="document.getElementById('vehicleImage').click()">
                                <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-400 to-indigo-500 rounded-full mb-4 shadow-lg hover:scale-110 transition-transform duration-300">
                                    <span class="text-3xl">üì∑</span>
                                </div>
                                <div class="text-purple-600 mb-3 text-lg font-semibold flex items-center justify-center">
                                    <span class="text-2xl mr-2">üñºÔ∏è</span>
                                    ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏û‡∏£‡∏ñ
                                    <span class="text-2xl ml-2">‚ú®</span>
                                </div>
                                <p class="text-sm text-purple-500 font-medium flex items-center justify-center">
                                    <span class="text-lg mr-1">üìÅ</span>
                                    ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå JPG, PNG (‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5MB)
                                    <span class="text-lg ml-1">üíæ</span>
                                </p>
                            </div>
                            <div id="imagePreview" class="hidden mt-6">
                                <div class="relative inline-block">
                                    <img id="previewImg" class="max-w-sm mx-auto rounded-2xl shadow-lg border-4 border-white">
                                    <div class="absolute -top-2 -right-2 bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg">
                                        <span class="text-lg">‚úÖ</span>
                                    </div>
                                </div>
                                <p id="fileName" class="text-sm text-gray-700 mt-3 font-medium flex items-center justify-center">
                                    <span class="text-lg mr-1">üìÑ</span>
                                    <span id="fileNameText"></span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Hidden Status Field -->
                    <input type="hidden" id="status" value="‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö">

                    <div class="md:col-span-2 mt-8">
                        <button type="submit" id="submitBtn" class="w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-bold py-6 px-8 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed hover-lift relative overflow-hidden group">
                            <div class="absolute inset-0 bg-gradient-to-r from-pink-500 to-yellow-500 opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                            <span id="submitText" class="text-xl flex items-center justify-center relative z-10">
                                <span class="text-3xl mr-3 animate-bounce">üöó</span>
                                ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ
                                <span class="text-3xl ml-3 animate-bounce" style="animation-delay: 0.2s">‚ú®</span>
                            </span>
                            <div id="submitLoading" class="hidden flex items-center justify-center relative z-10">
                                <div class="loading w-6 h-6 border-2 border-white border-t-transparent rounded-full mr-3"></div>
                                <span class="text-xl flex items-center">
                                    <span class="text-2xl mr-2">‚è≥</span>
                                    ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...
                                    <span class="text-2xl ml-2">üíæ</span>
                                </span>
                            </div>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboardSection" class="hidden">
            <!-- Summary Cards - Mobile Optimized -->
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8 bounce-in">
                <div class="gradient-card rounded-xl sm:rounded-2xl shadow-2xl p-3 sm:p-6 hover-lift border border-white border-opacity-20">
                    <div class="flex flex-col sm:flex-row items-center text-center sm:text-left">
                        <div class="p-2 sm:p-4 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl sm:rounded-2xl shadow-lg mb-2 sm:mb-0">
                            <span class="text-xl sm:text-3xl">üöó</span>
                        </div>
                        <div class="sm:ml-5">
                            <p class="text-xs sm:text-sm text-gray-600 font-semibold">‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå</p>
                            <p id="carCount" class="text-xl sm:text-3xl font-bold text-blue-600">0</p>
                        </div>
                    </div>
                </div>
                
                <div class="gradient-card rounded-xl sm:rounded-2xl shadow-2xl p-3 sm:p-6 hover-lift border border-white border-opacity-20">
                    <div class="flex flex-col sm:flex-row items-center text-center sm:text-left">
                        <div class="p-2 sm:p-4 bg-gradient-to-br from-green-400 to-green-600 rounded-xl sm:rounded-2xl shadow-lg mb-2 sm:mb-0">
                            <span class="text-xl sm:text-3xl">üèçÔ∏è</span>
                        </div>
                        <div class="sm:ml-5">
                            <p class="text-xs sm:text-sm text-gray-600 font-semibold">‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏ã‡∏Ñ‡πå</p>
                            <p id="motorcycleCount" class="text-xl sm:text-3xl font-bold text-green-600">0</p>
                        </div>
                    </div>
                </div>
                
                <div class="gradient-card rounded-xl sm:rounded-2xl shadow-2xl p-3 sm:p-6 hover-lift border border-white border-opacity-20">
                    <div class="flex flex-col sm:flex-row items-center text-center sm:text-left">
                        <div class="p-2 sm:p-4 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl sm:rounded-2xl shadow-lg mb-2 sm:mb-0">
                            <span class="text-xl sm:text-3xl">üöõ</span>
                        </div>
                        <div class="sm:ml-5">
                            <p class="text-xs sm:text-sm text-gray-600 font-semibold">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</p>
                            <p id="otherCount" class="text-xl sm:text-3xl font-bold text-purple-600">0</p>
                        </div>
                    </div>
                </div>
                
                <div class="gradient-card rounded-xl sm:rounded-2xl shadow-2xl p-3 sm:p-6 hover-lift border border-white border-opacity-20">
                    <div class="flex flex-col sm:flex-row items-center text-center sm:text-left">
                        <div class="p-2 sm:p-4 bg-gradient-to-br from-orange-400 to-orange-600 rounded-xl sm:rounded-2xl shadow-lg mb-2 sm:mb-0">
                            <span class="text-xl sm:text-3xl">üìä</span>
                        </div>
                        <div class="sm:ml-5">
                            <p class="text-xs sm:text-sm text-gray-600 font-semibold">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                            <p id="totalCount" class="text-xl sm:text-3xl font-bold text-orange-600">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mobile Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-3 mb-6 lg:hidden">
                <button id="refreshData" class="bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 hover-lift shadow-lg text-lg">
                    üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                </button>
                <button id="clearSearchMobile" class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 hover-lift shadow-lg text-lg">
                    üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                </button>
            </div>

            <!-- Data Display Container -->
            <div class="gradient-card rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-6 lg:p-10 slide-up border border-white border-opacity-20">
                <!-- Header - Desktop Only -->
                <div class="hidden lg:flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-4">
                    <h2 class="text-3xl font-bold text-gray-800">üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</h2>
                    <div class="flex flex-col sm:flex-row gap-3 w-full lg:w-auto">
                        <button id="refreshDataDesktop" class="bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 hover-lift shadow-lg">
                            üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        </button>
                        <button id="clearSearch" class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 hover-lift shadow-lg">
                            üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                        </button>
                    </div>
                </div>

                <!-- Mobile Header -->
                <div class="lg:hidden mb-6">
                    <h2 class="text-xl sm:text-2xl font-bold text-gray-800 text-center">üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</h2>
                </div>

                <!-- Search and Filter Section - Mobile Optimized -->
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl sm:rounded-2xl p-4 sm:p-6 mb-6 sm:mb-8 border border-blue-200">
                    <h3 class="text-lg sm:text-xl font-bold text-gray-800 mb-4 flex items-center justify-center sm:justify-start">
                        üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    </h3>
                    
                    <div class="space-y-4">
                        <!-- Search Input - Full Width on Mobile -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</label>
                            <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà, ‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ, ‡∏ä‡∏∑‡πà‡∏≠, ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î..." class="w-full px-4 py-4 text-base border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white">
                        </div>
                        
                        <!-- Vehicle Type Filter and Search Button -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ</label>
                                <select id="vehicleTypeFilter" class="w-full px-4 py-4 text-base border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white">
                                    <option value="">‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</option>
                                    <option value="‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå">üöó ‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå</option>
                                    <option value="‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå">üèçÔ∏è ‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå</option>
                                    <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">üöõ ‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</label>
                                <button id="searchButton" class="w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-4 px-4 text-base rounded-xl transition-all duration-300 hover-lift shadow-lg flex items-center justify-center">
                                    üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Search Results Info and Controls -->
                    <div class="mt-6 space-y-4">
                        <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
                            <div id="searchResults" class="text-sm text-gray-600 font-medium text-center sm:text-left">
                                ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î <span id="totalResults">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                            </div>
                            <div class="flex items-center gap-2 w-full sm:w-auto justify-center sm:justify-end">
                                <label class="text-sm text-gray-600 font-medium">‡πÅ‡∏™‡∏î‡∏á:</label>
                                <select id="itemsPerPage" class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white">
                                    <option value="5">5 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</option>
                                    <option value="10" selected>10 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</option>
                                    <option value="25">25 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</option>
                                    <option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                                </select>
                            </div>
                        </div>
                        <div class="text-xs sm:text-sm text-gray-500 text-center">
                            üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö: ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
                        </div>
                    </div>
                </div>
                
                <!-- Mobile Card View -->
                <div id="mobileCardView" class="block lg:hidden space-y-4">
                    <!-- Cards will be inserted here by JavaScript -->
                </div>
                
                <!-- Desktop Table View -->
                <div id="desktopTableView" class="hidden lg:block overflow-x-auto">
                    <table class="w-full border-collapse border border-gray-300">
                        <thead>
                            <tr class="bg-indigo-50">
                                <th class="border border-gray-300 px-4 py-3 text-center font-semibold text-gray-700">üè† ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</th>
                                <th class="border border-gray-300 px-4 py-3 text-center font-semibold text-gray-700">üî¢ ‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ</th>
                                <th class="border border-gray-300 px-4 py-3 text-center font-semibold text-gray-700">üìä ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                <th class="border border-gray-300 px-4 py-3 text-center font-semibold text-gray-700">üì∏ ‡∏†‡∏≤‡∏û‡∏£‡∏ñ</th>
                            </tr>
                        </thead>
                        <tbody id="dataTableBody">
                            <tr>
                                <td colspan="4" class="border border-gray-300 px-4 py-8 text-center text-gray-500">
                                    <div class="text-6xl mb-4">üìä</div>
                                    <div class="text-lg font-semibold mb-2">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏ó‡πá‡∏ö "‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
                                    <div class="text-sm">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡∏π‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Pagination Navigation - Mobile Optimized -->
                <div id="paginationContainer" class="mt-6 hidden">
                    <!-- Mobile Pagination -->
                    <div class="lg:hidden">
                        <div class="text-sm text-gray-600 text-center mb-4">
                            ‡πÅ‡∏™‡∏î‡∏á <span id="showingFromMobile">1</span> ‡∏ñ‡∏∂‡∏á <span id="showingToMobile">10</span> ‡∏à‡∏≤‡∏Å <span id="totalItemsMobile">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                        </div>
                        
                        <div class="flex justify-center items-center gap-2">
                            <button id="prevPageMobile" class="px-4 py-3 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center">
                                ‚¨ÖÔ∏è ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
                            </button>
                            
                            <div id="pageNumbersMobile" class="flex items-center gap-1 mx-2">
                                <!-- Page numbers will be inserted here -->
                            </div>
                            
                            <button id="nextPageMobile" class="px-4 py-3 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center">
                                ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚û°Ô∏è
                            </button>
                        </div>
                    </div>
                    
                    <!-- Desktop Pagination -->
                    <div class="hidden lg:flex flex-col sm:flex-row justify-between items-center gap-4">
                        <div class="text-sm text-gray-600">
                            ‡πÅ‡∏™‡∏î‡∏á <span id="showingFrom">1</span> ‡∏ñ‡∏∂‡∏á <span id="showingTo">10</span> ‡∏à‡∏≤‡∏Å <span id="totalItems">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                        </div>
                        
                        <div class="flex items-center gap-2">
                            <button id="firstPage" class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200">
                                ‚èÆÔ∏è ‡πÅ‡∏£‡∏Å
                            </button>
                            <button id="prevPage" class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200">
                                ‚¨ÖÔ∏è ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
                            </button>
                            
                            <div id="pageNumbers" class="flex items-center gap-1">
                                <!-- Page numbers will be inserted here -->
                            </div>
                            
                            <button id="nextPage" class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200">
                                ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚û°Ô∏è
                            </button>
                            <button id="lastPage" class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200">
                                ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ ‚è≠Ô∏è
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Copyright Footer -->
        <footer class="mt-16 bg-gradient-to-r from-gray-800 via-gray-900 to-gray-800 text-white py-6 fade-in">
            <div class="container mx-auto px-4">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="flex items-center mb-4 md:mb-0">
                        <span class="text-3xl mr-3">¬©Ô∏è</span>
                        <div>
                            <h3 class="text-xl font-bold">9One 2025</h3>
                            <p class="text-gray-300 text-sm">‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ - ‡∏ô‡∏¥‡∏ï‡∏¥‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô</p>
                        </div>
                    </div>
                    <div class="text-center md:text-right">
                        <p class="text-gray-300 text-sm mb-1">‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏£</p>
                        <p class="text-gray-400 text-xs">All Rights Reserved</p>
                    </div>
                </div>
                <div class="border-t border-gray-700 mt-4 pt-4 text-center">
                    <p class="text-gray-400 text-xs flex items-center justify-center">
                        <span class="mr-2">üèòÔ∏è</span>
                        ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏∏‡∏°‡∏ä‡∏ô ‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢
                        <span class="ml-2">‚ú®</span>
                    </p>
                </div>
            </div>
        </footer>

        <!-- Image Modal -->
        <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-75 backdrop-blur-sm flex items-center justify-center z-50 hidden">
            <div class="relative max-w-4xl max-h-[90vh] mx-4 bounce-in">
                <!-- Close button -->
                <button id="closeImageModal" class="absolute -top-4 -right-4 bg-white hover:bg-gray-100 text-gray-800 rounded-full w-12 h-12 flex items-center justify-center shadow-2xl transition-all duration-300 hover:scale-110 z-10">
                    <span class="text-2xl">‚úï</span>
                </button>
                
                <!-- Image container -->
                <div class="bg-white rounded-2xl p-4 shadow-2xl">
                    <img id="modalImage" src="" alt="‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ñ" class="max-w-full max-h-[80vh] object-contain rounded-xl">
                    
                    <!-- Image info -->
                    <div class="mt-4 text-center">
                        <h3 id="modalImageTitle" class="text-xl font-bold text-gray-800 mb-2"></h3>
                        <p id="modalProvince" class="text-md text-gray-500 font-medium mb-3"></p>
                        <div class="flex flex-wrap justify-center gap-4 text-sm text-gray-600">
                            <div class="flex items-center">
                                <span class="text-lg mr-1">üè†</span>
                                <span id="modalHouseNumber"></span>
                            </div>
                            <div class="flex items-center">
                                <span class="text-lg mr-1">üë§</span>
                                <span id="modalOwnerName"></span>
                            </div>
                            <div class="flex items-center">
                                <span class="text-lg mr-1">üì±</span>
                                <span id="modalPhoneNumber"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-3xl p-8 max-w-md mx-4 text-center bounce-in">
                <svg class="success-checkmark" viewBox="0 0 52 52">
                    <circle class="success-checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
                    <path class="success-checkmark__check" fill="none" d="m14.1 27.2l7.1 7.2 16.7-16.8"/>
                </svg>
                <h3 class="text-2xl font-bold text-gray-800 mb-2">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h3>
                <p class="text-gray-600 mb-6">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</p>
                <button id="closeSuccessModal" class="bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-3 px-8 rounded-xl transition-all duration-300 hover-lift">
                    ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢
                </button>
            </div>
        </div>

        <!-- Success/Error Messages -->
        <div id="successMessage" class="fixed top-4 right-4 bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-4 rounded-2xl shadow-2xl transform translate-x-full transition-transform duration-300 z-50">
            ‚úÖ ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!
        </div>
        
        <div id="errorMessage" class="fixed top-4 right-4 bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-4 rounded-2xl shadow-2xl transform translate-x-full transition-transform duration-300 z-50">
            ‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
        </div>
    </div>

    <script>
        // Configuration - Direct Google Sheets access
        const SPREADSHEET_ID = '1kwFxoXRb6JsvkcglUpuXkYYRqZiOuAWWAWG-4kot3XM';
        const SHEET_NAME = '‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ';
        const API_KEY = 'AIzaSyDummy'; // This will use public access
        
        // Fallback API URL for form submissions
        const API_URL = 'https://script.google.com/macros/s/AKfycbz608VbnbGi89kV01UgPMtZuYdRHNfCXTrnHPIRHdjBRzTkhbwr0DWrB5oElXnyMvGIew/exec';
        
        // Global variables
        let vehicleData = [];
        let filteredData = [];
        let currentPage = 1;
        let itemsPerPage = 10; // Show 10 rows by default
        
        // Tab switching
        document.getElementById('registerTab').addEventListener('click', () => switchTab('register'));
        document.getElementById('dashboardTab').addEventListener('click', () => switchTab('dashboard'));
        
        // Mobile tab switching
        document.getElementById('registerTabMobile').addEventListener('click', () => switchTab('register'));
        document.getElementById('dashboardTabMobile').addEventListener('click', () => switchTab('dashboard'));
        
        function switchTab(tab) {
            const registerSection = document.getElementById('registerSection');
            const dashboardSection = document.getElementById('dashboardSection');
            
            // Desktop tabs
            const registerTab = document.getElementById('registerTab');
            const dashboardTab = document.getElementById('dashboardTab');
            
            // Mobile tabs
            const registerTabMobile = document.getElementById('registerTabMobile');
            const dashboardTabMobile = document.getElementById('dashboardTabMobile');
            
            if (tab === 'register') {
                registerSection.classList.remove('hidden');
                dashboardSection.classList.add('hidden');
                
                // Desktop tab styling
                registerTab.classList.add('bg-white', 'bg-opacity-20', 'text-white', 'border-white', 'border-opacity-30');
                registerTab.classList.remove('bg-white', 'bg-opacity-10', 'border-opacity-20');
                dashboardTab.classList.add('bg-white', 'bg-opacity-10', 'border-opacity-20');
                dashboardTab.classList.remove('bg-white', 'bg-opacity-20', 'border-white', 'border-opacity-30');
                
                // Mobile tab styling
                registerTabMobile.classList.add('bg-white', 'bg-opacity-20', 'text-white', 'border-white', 'border-opacity-30');
                registerTabMobile.classList.remove('bg-white', 'bg-opacity-10', 'border-opacity-20');
                dashboardTabMobile.classList.add('bg-white', 'bg-opacity-10', 'border-opacity-20');
                dashboardTabMobile.classList.remove('bg-white', 'bg-opacity-20', 'border-white', 'border-opacity-30');
                
                // Stop auto-refresh when leaving dashboard
                stopAutoRefresh();
            } else {
                registerSection.classList.add('hidden');
                dashboardSection.classList.remove('hidden');
                
                // Desktop tab styling
                dashboardTab.classList.add('bg-white', 'bg-opacity-20', 'text-white', 'border-white', 'border-opacity-30');
                dashboardTab.classList.remove('bg-white', 'bg-opacity-10', 'border-opacity-20');
                registerTab.classList.add('bg-white', 'bg-opacity-10', 'border-opacity-20');
                registerTab.classList.remove('bg-white', 'bg-opacity-20', 'border-white', 'border-opacity-30');
                
                // Mobile tab styling
                dashboardTabMobile.classList.add('bg-white', 'bg-opacity-20', 'text-white', 'border-white', 'border-opacity-30');
                dashboardTabMobile.classList.remove('bg-white', 'bg-opacity-10', 'border-opacity-20');
                registerTabMobile.classList.add('bg-white', 'bg-opacity-10', 'border-opacity-20');
                registerTabMobile.classList.remove('bg-white', 'bg-opacity-20', 'border-white', 'border-opacity-30');
                
                // Only load data if not already loaded
                if (vehicleData.length === 0) {
                    loadDashboardData();
                }
                // Start auto-refresh only when on dashboard
                startAutoRefresh();
            }
        }
        
        // Search and Filter Functions
        function initializeSearchAndFilter() {
            const searchInput = document.getElementById('searchInput');
            const vehicleTypeFilter = document.getElementById('vehicleTypeFilter');
            const searchButton = document.getElementById('searchButton');
            const clearSearchBtn = document.getElementById('clearSearch');
            const itemsPerPageSelect = document.getElementById('itemsPerPage');
            
            // Add event listeners for real-time search
            searchInput.addEventListener('input', debounce(performSearch, 300));
            vehicleTypeFilter.addEventListener('change', performSearch);
            searchButton.addEventListener('click', performSearch);
            clearSearchBtn.addEventListener('click', clearAllFilters);
            itemsPerPageSelect.addEventListener('change', handleItemsPerPageChange);
            
            // Initialize pagination controls
            initializePaginationControls();
        }
        
        function initializePaginationControls() {
            // Desktop pagination controls
            const firstPageEl = document.getElementById('firstPage');
            const prevPageEl = document.getElementById('prevPage');
            const nextPageEl = document.getElementById('nextPage');
            const lastPageEl = document.getElementById('lastPage');
            
            if (firstPageEl) firstPageEl.addEventListener('click', () => goToPage(1));
            if (prevPageEl) prevPageEl.addEventListener('click', () => goToPage(currentPage - 1));
            if (nextPageEl) nextPageEl.addEventListener('click', () => goToPage(currentPage + 1));
            if (lastPageEl) lastPageEl.addEventListener('click', () => {
                const totalPages = Math.ceil(filteredData.length / itemsPerPage);
                goToPage(totalPages);
            });
            
            // Mobile pagination controls
            const prevPageMobileEl = document.getElementById('prevPageMobile');
            const nextPageMobileEl = document.getElementById('nextPageMobile');
            
            if (prevPageMobileEl) prevPageMobileEl.addEventListener('click', () => goToPage(currentPage - 1));
            if (nextPageMobileEl) nextPageMobileEl.addEventListener('click', () => goToPage(currentPage + 1));
        }
        
        function handleItemsPerPageChange() {
            const select = document.getElementById('itemsPerPage');
            if (select.value === 'all') {
                itemsPerPage = Math.max(filteredData.length, 999999);
            } else {
                itemsPerPage = parseInt(select.value);
            }
            currentPage = 1; // Reset to first page
            updateDataTable();
            updatePagination();
        }
        
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            const vehicleTypeFilter = document.getElementById('vehicleTypeFilter').value;
            
            console.log('Performing search with term:', searchTerm);
            console.log('Vehicle type filter:', vehicleTypeFilter);
            console.log('Total vehicle data:', vehicleData.length);
            
            filteredData = vehicleData.filter(vehicle => {
                // Enhanced text search with better matching - focus on house number and license plate
                const houseNumber = (vehicle.houseNumber || '').toString().toLowerCase();
                const licensePlate = (vehicle.licensePlate || '').toString().toLowerCase();
                const fullName = (vehicle.fullName || vehicle.firstName + ' ' + vehicle.lastName || '').toLowerCase();
                const phoneNumber = (vehicle.phoneNumber || '').toString().toLowerCase();
                const province = (vehicle.province || '').toString().toLowerCase();
                
                // Check if search term matches any field (using includes for partial matching)
                const matchesSearch = !searchTerm || 
                    houseNumber.includes(searchTerm) ||
                    licensePlate.includes(searchTerm) ||
                    fullName.includes(searchTerm) ||
                    phoneNumber.includes(searchTerm) ||
                    province.includes(searchTerm);
                
                // Vehicle type filter
                const matchesVehicleType = !vehicleTypeFilter || vehicle.vehicleType === vehicleTypeFilter;
                
                const matches = matchesSearch && matchesVehicleType;
                
                return matches;
            });
            
            console.log('Filtered results:', filteredData.length);
            
            // Reset to first page when searching
            currentPage = 1;
            
            // Update items per page if "all" is selected
            const itemsPerPageSelect = document.getElementById('itemsPerPage');
            if (itemsPerPageSelect.value === 'all') {
                itemsPerPage = Math.max(filteredData.length, 999999);
            } else {
                itemsPerPage = parseInt(itemsPerPageSelect.value);
            }
            
            updateSearchResults();
            updateDataTable();
            updatePagination();
            updateDashboard(); // Update dashboard with filtered data
        }
        
        function updateSearchResults() {
            const totalResults = document.getElementById('totalResults');
            const searchResults = document.getElementById('searchResults');
            
            // Check if elements exist before updating
            if (totalResults) {
                totalResults.textContent = filteredData.length;
            }
            
            if (searchResults) {
                if (filteredData.length !== vehicleData.length) {
                    searchResults.innerHTML = `‡∏û‡∏ö <span class="text-blue-600 font-bold">${filteredData.length}</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${vehicleData.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
                } else {
                    searchResults.innerHTML = `‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î <span class="text-blue-600 font-bold">${filteredData.length}</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
                }
            }
        }
        
        function clearAllFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('vehicleTypeFilter').value = '';
            document.getElementById('itemsPerPage').value = '10';
            
            filteredData = [...vehicleData];
            currentPage = 1;
            itemsPerPage = 10;
            
            updateSearchResults();
            updateDataTable();
            updatePagination();
            updateDashboard();
            
            // Show success message
            showMessage('success', '‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
        }
        
        // Pagination Functions
        function goToPage(page) {
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            if (page < 1 || page > totalPages) return;
            
            currentPage = page;
            updateDataTable();
            updatePagination();
        }
        
        function updatePagination() {
            const totalItems = filteredData.length;
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            const paginationContainer = document.getElementById('paginationContainer');
            
            // Show/hide pagination based on whether we need it
            if (totalPages <= 1) {
                paginationContainer.classList.add('hidden');
                return;
            } else {
                paginationContainer.classList.remove('hidden');
            }
            
            // Update showing info for both desktop and mobile
            const showingFrom = totalItems === 0 ? 0 : (currentPage - 1) * itemsPerPage + 1;
            const showingTo = Math.min(currentPage * itemsPerPage, totalItems);
            
            // Desktop pagination info
            const showingFromEl = document.getElementById('showingFrom');
            const showingToEl = document.getElementById('showingTo');
            const totalItemsEl = document.getElementById('totalItems');
            
            if (showingFromEl) showingFromEl.textContent = showingFrom;
            if (showingToEl) showingToEl.textContent = showingTo;
            if (totalItemsEl) totalItemsEl.textContent = totalItems;
            
            // Mobile pagination info
            const showingFromMobileEl = document.getElementById('showingFromMobile');
            const showingToMobileEl = document.getElementById('showingToMobile');
            const totalItemsMobileEl = document.getElementById('totalItemsMobile');
            
            if (showingFromMobileEl) showingFromMobileEl.textContent = showingFrom;
            if (showingToMobileEl) showingToMobileEl.textContent = showingTo;
            if (totalItemsMobileEl) totalItemsMobileEl.textContent = totalItems;
            
            // Update desktop button states
            const firstPageEl = document.getElementById('firstPage');
            const prevPageEl = document.getElementById('prevPage');
            const nextPageEl = document.getElementById('nextPage');
            const lastPageEl = document.getElementById('lastPage');
            
            if (firstPageEl) firstPageEl.disabled = currentPage === 1;
            if (prevPageEl) prevPageEl.disabled = currentPage === 1;
            if (nextPageEl) nextPageEl.disabled = currentPage === totalPages;
            if (lastPageEl) lastPageEl.disabled = currentPage === totalPages;
            
            // Update mobile button states
            const prevPageMobileEl = document.getElementById('prevPageMobile');
            const nextPageMobileEl = document.getElementById('nextPageMobile');
            
            if (prevPageMobileEl) prevPageMobileEl.disabled = currentPage === 1;
            if (nextPageMobileEl) nextPageMobileEl.disabled = currentPage === totalPages;
            
            // Update page numbers for both desktop and mobile
            updatePageNumbers(totalPages);
            updateMobilePageNumbers(totalPages);
        }
        
        function updatePageNumbers(totalPages) {
            const pageNumbersContainer = document.getElementById('pageNumbers');
            pageNumbersContainer.innerHTML = '';
            
            if (totalPages <= 1) return;
            
            // Calculate which page numbers to show
            let startPage = Math.max(1, currentPage - 2);
            let endPage = Math.min(totalPages, currentPage + 2);
            
            // Adjust if we're near the beginning or end
            if (currentPage <= 3) {
                endPage = Math.min(5, totalPages);
            }
            if (currentPage >= totalPages - 2) {
                startPage = Math.max(1, totalPages - 4);
            }
            
            // Add first page and ellipsis if needed
            if (startPage > 1) {
                addPageButton(1);
                if (startPage > 2) {
                    pageNumbersContainer.appendChild(createEllipsis());
                }
            }
            
            // Add page numbers
            for (let i = startPage; i <= endPage; i++) {
                addPageButton(i);
            }
            
            // Add ellipsis and last page if needed
            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    pageNumbersContainer.appendChild(createEllipsis());
                }
                addPageButton(totalPages);
            }
        }
        
        function addPageButton(pageNum) {
            const button = document.createElement('button');
            button.textContent = pageNum;
            button.className = `px-3 py-2 border rounded-lg text-sm transition-all duration-200 ${
                pageNum === currentPage 
                    ? 'bg-blue-500 text-white border-blue-500' 
                    : 'border-gray-300 hover:bg-gray-50'
            }`;
            button.addEventListener('click', () => goToPage(pageNum));
            document.getElementById('pageNumbers').appendChild(button);
        }
        
        function addMobilePageButton(pageNum) {
            const button = document.createElement('button');
            button.textContent = pageNum;
            button.className = `px-2 py-1 border rounded text-xs transition-all duration-200 ${
                pageNum === currentPage 
                    ? 'bg-blue-500 text-white border-blue-500' 
                    : 'border-gray-300 hover:bg-gray-50'
            }`;
            button.addEventListener('click', () => goToPage(pageNum));
            document.getElementById('pageNumbersMobile').appendChild(button);
        }
        
        function createEllipsis() {
            const span = document.createElement('span');
            span.textContent = '...';
            span.className = 'px-2 py-2 text-gray-500';
            return span;
        }
        
        function createMobileEllipsis() {
            const span = document.createElement('span');
            span.textContent = '...';
            span.className = 'px-1 py-1 text-gray-500 text-xs';
            return span;
        }
        
        function updateMobilePageNumbers(totalPages) {
            const pageNumbersContainer = document.getElementById('pageNumbersMobile');
            if (!pageNumbersContainer) return;
            
            pageNumbersContainer.innerHTML = '';
            
            if (totalPages <= 1) return;
            
            // For mobile, show fewer page numbers to save space
            let startPage = Math.max(1, currentPage - 1);
            let endPage = Math.min(totalPages, currentPage + 1);
            
            // Adjust if we're near the beginning or end
            if (currentPage <= 2) {
                endPage = Math.min(3, totalPages);
            }
            if (currentPage >= totalPages - 1) {
                startPage = Math.max(1, totalPages - 2);
            }
            
            // Add first page and ellipsis if needed
            if (startPage > 1) {
                addMobilePageButton(1);
                if (startPage > 2) {
                    pageNumbersContainer.appendChild(createMobileEllipsis());
                }
            }
            
            // Add page numbers
            for (let i = startPage; i <= endPage; i++) {
                addMobilePageButton(i);
            }
            
            // Add ellipsis and last page if needed
            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    pageNumbersContainer.appendChild(createMobileEllipsis());
                }
                addMobilePageButton(totalPages);
            }
        }
        
        function highlightSearchTerm(text, searchTerm) {
            if (!searchTerm || !text) return text;
            
            const regex = new RegExp(`(${searchTerm})`, 'gi');
            return text.replace(regex, '<span class="highlight">$1</span>');
        }
        
        // Image preview
        document.getElementById('vehicleImage').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                // Validate file size (5MB limit)
                if (file.size > 5 * 1024 * 1024) {
                    showMessage('error', '‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5MB)');
                    this.value = '';
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('imagePreview').classList.remove('hidden');
                    document.getElementById('previewImg').src = e.target.result;
                    document.getElementById('fileNameText').textContent = file.name;
                    document.getElementById('imageUploadArea').classList.add('hidden');
                };
                reader.readAsDataURL(file);
            }
        });
        
        // Form submission
        document.getElementById('vehicleForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const submitText = document.getElementById('submitText');
            const submitLoading = document.getElementById('submitLoading');
            
            // Show loading state
            submitBtn.disabled = true;
            submitText.classList.add('hidden');
            submitLoading.classList.remove('hidden');
            
            try {
                // Convert image to Base64 first
                const imageFile = document.getElementById('vehicleImage').files[0];
                let imageBase64 = "";
                
                if (imageFile) {
                    imageBase64 = await convertFileToBase64(imageFile);
                    console.log('Image converted to Base64');
                }
                
                // Prepare form data using FormData
                const formData = new FormData();
                formData.append('action', 'register');
                formData.append('fullName', document.getElementById('fullName').value);
                formData.append('houseNumber', document.getElementById('houseNumber').value);
                formData.append('phoneNumber', document.getElementById('phoneNumber').value);
                formData.append('vehicleType', document.getElementById('vehicleType').value);
                formData.append('licensePlate', document.getElementById('licensePlate').value);
                formData.append('province', document.getElementById('province').value); // New field added
                formData.append('vehicleImage', imageBase64); // Send Base64 instead of file
                formData.append('status', document.getElementById('status').value); // Add status field
                
                console.log('Sending registration data...');
                
                // Send to Google Apps Script
                const response = await fetch(API_URL, {
                    method: 'POST',
                    body: formData
                });
                
                console.log('Response received:', response.status);
                
                const result = await response.json();
                console.log('Result:', result);
                
                if (result.success) {
                    // Show success modal with animation
                    showSuccessModal();
                    this.reset();
                    document.getElementById('imagePreview').classList.add('hidden');
                    document.getElementById('imageUploadArea').classList.remove('hidden');
                    
                    // Add success animation to submit button
                    submitBtn.classList.add('pulse-success');
                    setTimeout(() => {
                        submitBtn.classList.remove('pulse-success');
                    }, 600);
                    
                    console.log('Registration successful:', result);
                } else {
                    throw new Error(result.message || '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
                }
                
            } catch (error) {
                console.error('Error details:', error);
                showMessage('error', `‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${error.message}`);
            } finally {
                // Reset button state
                submitBtn.disabled = false;
                submitText.classList.remove('hidden');
                submitLoading.classList.add('hidden');
            }
        });
        
        // Convert file to base64
        function convertFileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        }
        
        // Load dashboard data directly from Google Sheets
        async function loadDashboardData() {
            console.log('Loading dashboard data from Google Sheets...');
            
            // Initialize empty data
            vehicleData = [];
            filteredData = [];
            
            // Show loading state
            updateDashboard();
            updateDataTable();
            updateSearchResults();
            updatePagination();
            
            try {
                // Try to load from Google Sheets directly using CSV export
                const csvUrl = `https://docs.google.com/spreadsheets/d/${SPREADSHEET_ID}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent(SHEET_NAME)}`;
                
                console.log('Fetching from CSV URL:', csvUrl);
                
                const response = await fetch(csvUrl);
                const csvText = await response.text();
                
                console.log('CSV Response received, length:', csvText.length);
                
                if (csvText && csvText.trim()) {
                    // Parse CSV data
                    const parsedData = parseCSVData(csvText);
                    
                    if (parsedData.length > 0) {
                        vehicleData = parsedData;
                        filteredData = [...vehicleData];
                        
                        console.log('Data loaded from Google Sheets:', vehicleData.length, 'records');
                        
                        // Update UI with real data
                        updateDashboard();
                        updateDataTable();
                        updateSearchResults();
                        updatePagination();
                        
                        showMessage('success', `‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Google Sheets ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${vehicleData.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`);
                    } else {
                        console.log('No data found in spreadsheet');
                        showMessage('info', '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Google Sheets');
                    }
                } else {
                    throw new Error('Empty response from Google Sheets');
                }
                
            } catch (error) {
                console.error('Error loading from Google Sheets:', error);
                
                // Fallback to original API method
                try {
                    console.log('Falling back to API method...');
                    const formData = new FormData();
                    formData.append('action', 'getData');
                    
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        body: formData
                    });
                    
                    const result = await response.json();
                    console.log('Fallback API Response:', result);
                    
                    if (result && result.success && result.data) {
                        vehicleData = result.data;
                        filteredData = [...vehicleData];
                        
                        // Update UI with real data
                        updateDashboard();
                        updateDataTable();
                        updateSearchResults();
                        updatePagination();
                        
                        console.log('Fallback data loaded:', vehicleData.length, 'records');
                        showMessage('success', `‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${vehicleData.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`);
                    } else {
                        console.log('No data received from fallback API');
                        showMessage('error', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ');
                    }
                } catch (fallbackError) {
                    console.error('Fallback API also failed:', fallbackError);
                    showMessage('error', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡πÅ‡∏´‡∏•‡πà‡∏á‡πÑ‡∏î‡πâ');
                }
            }
        }
        
        // Parse CSV data from Google Sheets
        function parseCSVData(csvText) {
            try {
                const lines = csvText.split('\n').filter(line => line.trim());
                if (lines.length <= 1) return []; // No data rows
                
                // Parse header row to understand column structure
                const headers = parseCSVRow(lines[0]);
                console.log('CSV Headers:', headers);
                
                const data = [];
                
                // Parse data rows (skip header)
                for (let i = 1; i < lines.length; i++) {
                    const row = parseCSVRow(lines[i]);
                    if (row.length === 0 || row.every(cell => !cell.trim())) continue; // Skip empty rows
                    
                    // Map CSV columns to our data structure
                    // Assuming columns: Timestamp, ‡∏ä‡∏∑‡πà‡∏≠ ‡∏™‡∏Å‡∏∏‡∏•, ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà, ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏ñ, ‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ, ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (new), ‡∏†‡∏≤‡∏û‡∏£‡∏ñ, ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ß‡∏•‡∏≤, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
                    // WARNING: If you haven't added the "Province" column in your sheet, this mapping might be off.
                    // Row 6 used to be Image, now it should be Province.
                    
                    const vehicle = {
                        sequenceNumber: i, // Use row number as sequence
                        registrationDate: row[0] || '', // Keep original timestamp
                        fullName: row[1] || '',
                        houseNumber: row[2] || '',
                        phoneNumber: row[3] || '',
                        vehicleType: row[4] || '',
                        licensePlate: row[5] || '',
                        province: row[6] || '', // New field
                        imageUrl: row[7] || '', // Shifted index from 6 to 7
                        dateTime: row[8] || '', // Shifted index
                        status: row[9] || '‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö', // Shifted index
                        // Legacy support
                        firstName: (row[1] || '').split(' ')[0] || '',
                        lastName: (row[1] || '').split(' ').slice(1).join(' ') || '',
                        // Add original row index for sorting (higher index = newer)
                        originalIndex: i
                    };
                    
                    // Only add if we have essential data
                    if (vehicle.fullName || vehicle.houseNumber || vehicle.licensePlate) {
                        data.push(vehicle);
                    }
                }
                
                // Sort data by row index from Google Sheets (highest to lowest)
                // Higher row index = newer entry (added later to the sheet)
                data.sort((a, b) => {
                    // Primary sort: by original index (row number in Google Sheets)
                    // Higher index = newer entry, so sort descending
                    return b.originalIndex - a.originalIndex;
                });
                
                console.log('Parsed and sorted CSV data:', data.length, 'records (newest first)');
                return data;
                
            } catch (error) {
                console.error('Error parsing CSV:', error);
                return [];
            }
        }
        
        // Parse a single CSV row, handling quoted fields
        function parseCSVRow(row) {
            const result = [];
            let current = '';
            let inQuotes = false;
            
            for (let i = 0; i < row.length; i++) {
                const char = row[i];
                
                if (char === '"') {
                    if (inQuotes && row[i + 1] === '"') {
                        // Escaped quote
                        current += '"';
                        i++; // Skip next quote
                    } else {
                        // Toggle quote state
                        inQuotes = !inQuotes;
                    }
                } else if (char === ',' && !inQuotes) {
                    // End of field
                    result.push(current.trim());
                    current = '';
                } else {
                    current += char;
                }
            }
            
            // Add the last field
            result.push(current.trim());
            
            return result;
        }
        
        // Update dashboard summary (now uses filtered data)
        function updateDashboard() {
            const dataToUse = filteredData.length > 0 ? filteredData : vehicleData;
            
            const carCount = dataToUse.filter(v => v.vehicleType === '‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå').length;
            const motorcycleCount = dataToUse.filter(v => v.vehicleType === '‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå').length;
            const otherCount = dataToUse.filter(v => v.vehicleType === '‡∏≠‡∏∑‡πà‡∏ô‡πÜ').length;
            const totalCount = dataToUse.length;
            
            document.getElementById('carCount').textContent = carCount;
            document.getElementById('motorcycleCount').textContent = motorcycleCount;
            document.getElementById('otherCount').textContent = otherCount;
            document.getElementById('totalCount').textContent = totalCount;
        }
        
        // Update data table (now uses filtered data with highlighting and pagination)
        function updateDataTable() {
            const tbody = document.getElementById('dataTableBody');
            const mobileCardView = document.getElementById('mobileCardView');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (filteredData.length === 0) {
                const emptyStateHTML = vehicleData.length === 0 ? `
                    <div class="no-results text-center py-8">
                        <div class="text-6xl mb-4">üìã</div>
                        <div class="text-lg font-semibold mb-2">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</div>
                        <div class="text-sm text-gray-600">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡∏Ñ‡∏±‡∏ô‡πÅ‡∏£‡∏Å</div>
                    </div>
                ` : `
                    <div class="no-results text-center py-8">
                        <div class="text-6xl mb-4">üîç</div>
                        <div class="text-lg font-semibold mb-2">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</div>
                        <div class="text-sm text-gray-600">‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á</div>
                    </div>
                `;
                
                // Update desktop table
                tbody.innerHTML = `
                    <tr>
                        <td colspan="4" class="border border-gray-300 px-4 py-8 text-center text-gray-500">
                            ${emptyStateHTML}
                        </td>
                    </tr>
                `;
                
                // Update mobile cards
                mobileCardView.innerHTML = emptyStateHTML;
                return;
            }
            
            // Calculate pagination
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = itemsPerPage === 999999 || itemsPerPage >= filteredData.length
                ? filteredData.length 
                : startIndex + itemsPerPage;
            const paginatedData = filteredData.slice(startIndex, endIndex);
            
            // Update desktop table
            tbody.innerHTML = paginatedData.map((vehicle, index) => `
                <tr class="hover:bg-gray-50 table-row-enter" style="animation-delay: ${index * 0.05}s">
                    <td class="border border-gray-300 px-6 py-4 text-center">
                        <div class="flex items-center justify-center">
                            <span class="text-2xl mr-2">üè†</span>
                            <span class="text-lg font-bold text-blue-600">${highlightSearchTerm(vehicle.houseNumber, searchTerm)}</span>
                        </div>
                    </td>
                    <td class="border border-gray-300 px-6 py-4 text-center">
                        <div class="flex flex-col items-center justify-center">
                            <div class="flex items-center">
                                <span class="text-2xl mr-2">${getVehicleIcon(vehicle.vehicleType)}</span>
                                <span class="font-mono text-lg font-bold text-gray-800">${highlightSearchTerm(vehicle.licensePlate, searchTerm)}</span>
                            </div>
                            ${vehicle.province ? `<div class="text-xs text-gray-500 font-medium mt-1">${highlightSearchTerm(vehicle.province, searchTerm)}</div>` : ''}
                        </div>
                    </td>
                    <td class="border border-gray-300 px-6 py-4 text-center">
                        <div class="flex flex-col items-center">
                            <span class="px-3 py-2 rounded-full text-sm font-bold ${getStatusColor(vehicle)} shadow-sm">
                                ${getStatusIcon(vehicle)} ${getStatusText(vehicle)}
                            </span>
                            <div class="text-xs text-gray-500 mt-2 flex items-center">
                                <span class="mr-1">üë§</span>
                                ${vehicle.fullName || (vehicle.firstName + ' ' + vehicle.lastName)}
                            </div>
                            <div class="text-xs text-gray-500 flex items-center">
                                <span class="mr-1">üì±</span>
                                ${vehicle.phoneNumber}
                            </div>
                        </div>
                    </td>
                    <td class="border border-gray-300 px-6 py-4 text-center">
                        <div class="flex justify-center">
                            <div class="relative group cursor-pointer" onclick="openImageModal('${vehicle.imageUrl || getPlaceholderImage(vehicle.vehicleType)}', '${vehicle.licensePlate}', '${vehicle.houseNumber}', '${vehicle.fullName || (vehicle.firstName + ' ' + vehicle.lastName)}', '${vehicle.phoneNumber}', '${vehicle.province || ''}')">
                                ${vehicle.imageUrl ? 
                                    `<img src="${vehicle.imageUrl}" alt="‡∏£‡∏ñ ${vehicle.licensePlate}" 
                                         class="w-20 h-16 object-cover rounded-lg shadow-md hover:scale-110 transition-transform duration-200 border-2 border-gray-200">
                                    <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded-lg transition-all duration-200 flex items-center justify-center">
                                        <span class="text-white text-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-200">üîç</span>
                                    </div>` :
                                    `<div class="w-20 h-16 bg-gradient-to-br ${getVehicleImageGradient(vehicle.vehicleType)} rounded-lg shadow-md hover:scale-110 transition-transform duration-200 border-2 border-gray-200 flex items-center justify-center relative overflow-hidden">
                                        <div class="absolute inset-0 opacity-20">
                                            <div class="w-full h-full" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(255,255,255,0.1) 5px, rgba(255,255,255,0.1) 10px);"></div>
                                        </div>
                                        <span class="text-2xl filter drop-shadow-sm relative z-10">${getVehicleIcon(vehicle.vehicleType)}</span>
                                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded-lg transition-all duration-200 flex items-center justify-center">
                                            <span class="text-white text-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200">üîç</span>
                                        </div>
                                    </div>`
                                }
                            </div>
                        </div>
                    </td>
                </tr>
            `).join('');
            
            // Update mobile cards
            mobileCardView.innerHTML = paginatedData.map((vehicle, index) => `
                <div class="${getCardBackgroundColor(vehicle)} rounded-xl shadow-lg p-5 hover-lift table-row-enter border-2 ${getCardBorderColor(vehicle)}" style="animation-delay: ${index * 0.05}s">
                    <!-- Status Section at Top -->
                    <div class="flex justify-center mb-4">
                        <span class="px-4 py-2 rounded-full text-sm font-bold ${getStatusColor(vehicle)} shadow-lg">
                            ${getStatusIcon(vehicle)} ${getStatusText(vehicle)}
                        </span>
                    </div>
                    
                    <!-- Header Section with Vehicle Icon and License Plate -->
                    <div class="flex items-center justify-center mb-4 pb-3 border-b border-gray-200">
                        <div class="flex items-center">
                            <div class="p-3 bg-gradient-to-br ${getVehicleGradient(vehicle.vehicleType)} rounded-xl shadow-lg mr-4">
                                <span class="text-3xl">${getVehicleIcon(vehicle.vehicleType)}</span>
                            </div>
                            <div class="text-center">
                                <div class="font-mono text-xl font-bold text-gray-800 mb-1">
                                    ${highlightSearchTerm(vehicle.licensePlate, searchTerm)}
                                </div>
                                <div class="text-sm text-gray-500 font-medium">
                                    ${vehicle.province ? highlightSearchTerm(vehicle.province, searchTerm) : vehicle.vehicleType}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Information Grid -->
                    <div class="space-y-3 mb-5">
                        <!-- Row 1: House Number -->
                        <div class="flex items-center p-3 bg-blue-50 rounded-lg">
                            <div class="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3">
                                <span class="text-white text-lg">üè†</span>
                            </div>
                            <div class="flex-1">
                                <div class="text-xs text-blue-600 font-semibold mb-1">‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</div>
                                <div class="text-lg font-bold text-blue-800">
                                    ${highlightSearchTerm(vehicle.houseNumber, searchTerm)}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Row 2: Owner Name -->
                        <div class="flex items-center p-3 bg-green-50 rounded-lg">
                            <div class="w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center mr-3">
                                <span class="text-white text-lg">üë§</span>
                            </div>
                            <div class="flex-1">
                                <div class="text-xs text-green-600 font-semibold mb-1">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</div>
                                <div class="text-base font-bold text-green-800">
                                    ${highlightSearchTerm(vehicle.fullName || (vehicle.firstName + ' ' + vehicle.lastName), searchTerm)}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Row 3: Phone Number -->
                        <div class="flex items-center p-3 bg-purple-50 rounded-lg">
                            <div class="w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3">
                                <span class="text-white text-lg">üì±</span>
                            </div>
                            <div class="flex-1">
                                <div class="text-xs text-purple-600 font-semibold mb-1">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</div>
                                <div class="text-base font-bold text-purple-800 font-mono">
                                    ${highlightSearchTerm(vehicle.phoneNumber, searchTerm)}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Vehicle Image Section (Bottom) -->
                    <div class="border-t border-gray-200 pt-4">
                        <div class="text-xs text-gray-500 font-semibold mb-3 flex items-center">
                            <span class="mr-2">üì∏</span>
                            ‡∏†‡∏≤‡∏û‡∏£‡∏ñ
                        </div>
                        ${vehicle.imageUrl ? 
                            `<div class="relative cursor-pointer group" onclick="openImageModal('${vehicle.imageUrl}', '${vehicle.licensePlate}', '${vehicle.houseNumber}', '${vehicle.fullName || (vehicle.firstName + ' ' + vehicle.lastName)}', '${vehicle.phoneNumber}', '${vehicle.province || ''}')">
                                <img src="${vehicle.imageUrl}" alt="‡∏£‡∏ñ ${vehicle.licensePlate}" 
                                     class="w-full h-40 object-cover rounded-xl shadow-lg border-2 border-gray-200 group-hover:shadow-xl transition-all duration-300">
                                <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 rounded-xl transition-all duration-300 flex items-center justify-center">
                                    <div class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-center">
                                        <span class="text-white text-4xl mb-2 block">üîç</span>
                                        <span class="text-white text-sm font-semibold">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏ç‡πà</span>
                                    </div>
                                </div>
                                <div class="absolute top-3 right-3 bg-white bg-opacity-90 rounded-full p-2 shadow-lg">
                                    <span class="text-xl">üì∑</span>
                                </div>
                            </div>` : 
                            `<div class="relative cursor-pointer group" onclick="openImageModal('${getPlaceholderImage(vehicle.vehicleType)}', '${vehicle.licensePlate}', '${vehicle.houseNumber}', '${vehicle.fullName || (vehicle.firstName + ' ' + vehicle.lastName)}', '${vehicle.phoneNumber}', '${vehicle.province || ''}')">
                                <div class="w-full h-40 bg-gradient-to-br ${getVehicleImageGradient(vehicle.vehicleType)} rounded-xl shadow-lg border-2 border-gray-200 group-hover:shadow-xl transition-all duration-300 flex items-center justify-center relative overflow-hidden">
                                    <!-- Background Pattern -->
                                    <div class="absolute inset-0 opacity-10">
                                        <div class="w-full h-full" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 20px);"></div>
                                    </div>
                                    <!-- Vehicle Icon -->
                                    <div class="relative z-10 text-center">
                                        <div class="text-6xl mb-2 filter drop-shadow-lg">${getVehicleIcon(vehicle.vehicleType)}</div>
                                        <div class="text-white font-bold text-lg drop-shadow-md">${vehicle.licensePlate}</div>
                                        <div class="text-white text-sm opacity-90 drop-shadow-sm">${vehicle.province || vehicle.vehicleType}</div>
                                    </div>
                                    <!-- Hover Overlay -->
                                    <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded-xl transition-all duration-300 flex items-center justify-center">
                                        <div class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-center">
                                            <span class="text-white text-3xl mb-2 block">üîç</span>
                                            <span class="text-white text-sm font-semibold">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏à‡∏≥‡∏•‡∏≠‡∏á</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="absolute top-3 right-3 bg-white bg-opacity-90 rounded-full p-2 shadow-lg">
                                    <span class="text-lg">üñºÔ∏è</span>
                                </div>
                            </div>`
                        }
                    </div>
                </div>
            `).join('');
        }
        
        // Get vehicle gradient for mobile cards
        function getVehicleGradient(type) {
            switch(type) {
                case '‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå': return 'from-blue-400 to-blue-600';
                case '‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå': return 'from-green-400 to-green-600';
                case '‡∏≠‡∏∑‡πà‡∏ô‡πÜ': return 'from-purple-400 to-purple-600';
                default: return 'from-gray-400 to-gray-600';
            }
        }
        
        // Get vehicle image gradient for placeholder images
        function getVehicleImageGradient(type) {
            switch(type) {
                case '‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå': return 'from-blue-500 to-blue-700';
                case '‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå': return 'from-green-500 to-green-700';
                case '‡∏≠‡∏∑‡πà‡∏ô‡πÜ': return 'from-purple-500 to-purple-700';
                default: return 'from-gray-500 to-gray-700';
            }
        }
        
        // Get placeholder image for vehicles without photos
        function getPlaceholderImage(vehicleType) {
            // Return a data URL for SVG placeholder image
            const icon = getVehicleIcon(vehicleType);
            const gradient = getVehicleImageGradient(vehicleType);
            
            // Create SVG placeholder
            const svg = `
                <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#4F46E5;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#1E40AF;stop-opacity:1" />
                        </linearGradient>
                        <pattern id="pattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
                            <rect width="20" height="20" fill="none"/>
                            <path d="M0,20 L20,0" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                        </pattern>
                    </defs>
                    <rect width="100%" height="100%" fill="url(#grad)"/>
                    <rect width="100%" height="100%" fill="url(#pattern)"/>
                    <text x="200" y="120" font-family="Arial, sans-serif" font-size="80" text-anchor="middle" fill="white" opacity="0.9">${icon}</text>
                    <text x="200" y="180" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="white" opacity="0.9">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≥‡∏•‡∏≠‡∏á</text>
                    <text x="200" y="210" font-family="Arial, sans-serif" font-size="18" text-anchor="middle" fill="white" opacity="0.7">${vehicleType}</text>
                </svg>
            `;
            
            return 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svg)));
        }
        
        // Get vehicle icon based on type
        function getVehicleIcon(type) {
            switch(type) {
                case '‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå': return 'üöó';
                case '‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå': return 'üèçÔ∏è';
                case '‡∏≠‡∏∑‡πà‡∏ô‡πÜ': return 'üöõ';
                default: return 'üöô';
            }
        }
        
        // Get status color based on Google Sheets data
        function getStatusColor(vehicle) {
            // Use status from Google Sheets if available
            if (vehicle.status && vehicle.status.trim() !== '') {
                const status = vehicle.status.toLowerCase().trim();
                
                if (status.includes('‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå') || status.includes('complete') || status.includes('approved') || status.includes('‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥')) {
                    return 'bg-green-100 text-green-800 border border-green-200';
                } else if (status.includes('‡∏£‡∏≠') || status.includes('pending') || status.includes('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏†‡∏≤‡∏û') || status.includes('no image')) {
                    return 'bg-yellow-100 text-yellow-800 border border-yellow-200';
                } else if (status.includes('‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥') || status.includes('rejected') || status.includes('‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå') || status.includes('incomplete')) {
                    return 'bg-red-100 text-red-800 border border-red-200';
                } else if (status.includes('‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö') || status.includes('review') || status.includes('checking')) {
                    return 'bg-blue-100 text-blue-800 border border-blue-200';
                } else {
                    return 'bg-gray-100 text-gray-800 border border-gray-200';
                }
            }
            
            // Fallback to automatic status if no status in Google Sheets
            const hasImage = vehicle.imageUrl && vehicle.imageUrl.trim() !== '';
            const hasComplete = vehicle.fullName && vehicle.houseNumber && vehicle.licensePlate && vehicle.phoneNumber;
            
            if (hasComplete && hasImage) {
                return 'bg-green-100 text-green-800 border border-green-200';
            } else if (hasComplete) {
                return 'bg-yellow-100 text-yellow-800 border border-yellow-200';
            } else {
                return 'bg-red-100 text-red-800 border border-red-200';
            }
        }
        
        // Get status icon based on Google Sheets data
        function getStatusIcon(vehicle) {
            // Use status from Google Sheets if available
            if (vehicle.status && vehicle.status.trim() !== '') {
                const status = vehicle.status.toLowerCase().trim();
                
                if (status.includes('‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå') || status.includes('complete') || status.includes('approved') || status.includes('‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥')) {
                    return '‚úÖ';
                } else if (status.includes('‡∏£‡∏≠') || status.includes('pending') || status.includes('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏†‡∏≤‡∏û') || status.includes('no image')) {
                    return '‚ö†Ô∏è';
                } else if (status.includes('‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥') || status.includes('rejected') || status.includes('‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå') || status.includes('incomplete')) {
                    return '‚ùå';
                } else if (status.includes('‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö') || status.includes('review') || status.includes('checking')) {
                    return 'üîç';
                } else {
                    return 'üìã';
                }
            }
            
            // Fallback to automatic status
            const hasImage = vehicle.imageUrl && vehicle.imageUrl.trim() !== '';
            const hasComplete = vehicle.fullName && vehicle.houseNumber && vehicle.licensePlate && vehicle.phoneNumber;
            
            if (hasComplete && hasImage) {
                return '‚úÖ';
            } else if (hasComplete) {
                return '‚ö†Ô∏è';
            } else {
                return '‚ùå';
            }
        }
        
        // Get status text based on Google Sheets data
        function getStatusText(vehicle) {
            // Use status from Google Sheets if available
            if (vehicle.status && vehicle.status.trim() !== '') {
                return vehicle.status.trim();
            }
            
            // Fallback to automatic status
            const hasImage = vehicle.imageUrl && vehicle.imageUrl.trim() !== '';
            const hasComplete = vehicle.fullName && vehicle.houseNumber && vehicle.licensePlate && vehicle.phoneNumber;
            
            if (hasComplete && hasImage) {
                return '‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå';
            } else if (hasComplete) {
                return '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏†‡∏≤‡∏û';
            } else {
                return '‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå';
            }
        }
        
        // Get vehicle type color
        function getVehicleTypeColor(type) {
            switch(type) {
                case '‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå': return 'bg-blue-100 text-blue-800';
                case '‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå': return 'bg-green-100 text-green-800';
                case '‡∏≠‡∏∑‡πà‡∏ô‡πÜ': return 'bg-purple-100 text-purple-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }
        
        // Get card background color based on status
        function getCardBackgroundColor(vehicle) {
            // Use status from Google Sheets if available
            if (vehicle.status && vehicle.status.trim() !== '') {
                const status = vehicle.status.toLowerCase().trim();
                
                if (status.includes('‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå') || status.includes('complete') || status.includes('approved') || status.includes('‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥')) {
                    return 'bg-gradient-to-br from-green-50 to-green-100';
                } else if (status.includes('‡∏£‡∏≠') || status.includes('pending') || status.includes('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏†‡∏≤‡∏û') || status.includes('no image')) {
                    return 'bg-gradient-to-br from-yellow-50 to-yellow-100';
                } else if (status.includes('‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥') || status.includes('rejected') || status.includes('‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå') || status.includes('incomplete')) {
                    return 'bg-gradient-to-br from-red-50 to-red-100';
                } else if (status.includes('‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö') || status.includes('review') || status.includes('checking')) {
                    return 'bg-gradient-to-br from-blue-50 to-blue-100';
                } else {
                    return 'bg-gradient-to-br from-gray-50 to-gray-100';
                }
            }
            
            // Fallback to automatic status
            const hasImage = vehicle.imageUrl && vehicle.imageUrl.trim() !== '';
            const hasComplete = vehicle.fullName && vehicle.houseNumber && vehicle.licensePlate && vehicle.phoneNumber;
            
            if (hasComplete && hasImage) {
                return 'bg-gradient-to-br from-green-50 to-green-100';
            } else if (hasComplete) {
                return 'bg-gradient-to-br from-yellow-50 to-yellow-100';
            } else {
                return 'bg-gradient-to-br from-red-50 to-red-100';
            }
        }
        
        // Get card border color based on status
        function getCardBorderColor(vehicle) {
            // Use status from Google Sheets if available
            if (vehicle.status && vehicle.status.trim() !== '') {
                const status = vehicle.status.toLowerCase().trim();
                
                if (status.includes('‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå') || status.includes('complete') || status.includes('approved') || status.includes('‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥')) {
                    return 'border-green-200 shadow-green-100';
                } else if (status.includes('‡∏£‡∏≠') || status.includes('pending') || status.includes('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏†‡∏≤‡∏û') || status.includes('no image')) {
                    return 'border-yellow-200 shadow-yellow-100';
                } else if (status.includes('‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥') || status.includes('rejected') || status.includes('‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå') || status.includes('incomplete')) {
                    return 'border-red-200 shadow-red-100';
                } else if (status.includes('‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö') || status.includes('review') || status.includes('checking')) {
                    return 'border-blue-200 shadow-blue-100';
                } else {
                    return 'border-gray-200 shadow-gray-100';
                }
            }
            
            // Fallback to automatic status
            const hasImage = vehicle.imageUrl && vehicle.imageUrl.trim() !== '';
            const hasComplete = vehicle.fullName && vehicle.houseNumber && vehicle.licensePlate && vehicle.phoneNumber;
            
            if (hasComplete && hasImage) {
                return 'border-green-200 shadow-green-100';
            } else if (hasComplete) {
                return 'border-yellow-200 shadow-yellow-100';
            } else {
                return 'border-red-200 shadow-red-100';
            }
        }
        
        // Refresh data button
        document.getElementById('refreshData').addEventListener('click', loadDashboardData);
        
        // Show success modal
        function showSuccessModal() {
            const modal = document.getElementById('successModal');
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        
        // Close success modal
        function closeSuccessModal() {
            const modal = document.getElementById('successModal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }
        
        // Show message function
        function showMessage(type, message) {
            let messageEl;
            let icon;
            
            if (type === 'success') {
                messageEl = document.getElementById('successMessage');
                icon = '‚úÖ ';
            } else if (type === 'info') {
                // Use success message element for info messages with different icon
                messageEl = document.getElementById('successMessage');
                icon = '‚ÑπÔ∏è ';
            } else {
                messageEl = document.getElementById('errorMessage');
                icon = '‚ùå ';
            }
            
            if (messageEl) {
                messageEl.textContent = icon + message;
                messageEl.classList.remove('translate-x-full');
                setTimeout(() => {
                    messageEl.classList.add('translate-x-full');
                }, 3000);
            }
        }
        
        // Auto-refresh functionality
        let autoRefreshInterval;
        
        function startAutoRefresh() {
            // Clear any existing interval first
            stopAutoRefresh();
            
            // Refresh data every 3 minutes when on dashboard
            autoRefreshInterval = setInterval(() => {
                if (!document.getElementById('dashboardSection').classList.contains('hidden')) {
                    console.log('Auto-refreshing dashboard data...');
                    loadDashboardData();
                }
            }, 180000); // 3 minutes (180 seconds)
        }
        
        function stopAutoRefresh() {
            if (autoRefreshInterval) {
                clearInterval(autoRefreshInterval);
                autoRefreshInterval = null;
                console.log('Auto-refresh stopped');
            }
        }
        
        // Image Modal Functions
        function openImageModal(imageUrl, licensePlate, houseNumber, ownerName, phoneNumber, province) {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalImageTitle');
            const modalProvince = document.getElementById('modalProvince');
            const modalHouseNumber = document.getElementById('modalHouseNumber');
            const modalOwnerName = document.getElementById('modalOwnerName');
            const modalPhoneNumber = document.getElementById('modalPhoneNumber');
            
            // Set image and info
            modalImage.src = imageUrl;
            modalTitle.textContent = `‡∏£‡∏ñ‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô ${licensePlate}`;
            modalProvince.textContent = province ? `‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î ${province}` : '';
            modalHouseNumber.textContent = `‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà ${houseNumber}`;
            modalOwnerName.textContent = ownerName;
            modalPhoneNumber.textContent = phoneNumber;
            
            // Show modal
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        
        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize search and filter functionality
            initializeSearchAndFilter();
            
            // Load dashboard data once on page load
            loadDashboardData();
            
            // Mobile action buttons
            const clearSearchMobileEl = document.getElementById('clearSearchMobile');
            const refreshDataDesktopEl = document.getElementById('refreshDataDesktop');
            
            if (clearSearchMobileEl) {
                clearSearchMobileEl.addEventListener('click', clearAllFilters);
            }
            
            if (refreshDataDesktopEl) {
                refreshDataDesktopEl.addEventListener('click', loadDashboardData);
            }
            
            // Success modal event listeners
            document.getElementById('closeSuccessModal').addEventListener('click', closeSuccessModal);
            document.getElementById('successModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeSuccessModal();
                }
            });
            
            // Image modal event listeners
            document.getElementById('closeImageModal').addEventListener('click', closeImageModal);
            document.getElementById('imageModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeImageModal();
                }
            });
            
            // Keyboard support for modals
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    if (!document.getElementById('imageModal').classList.contains('hidden')) {
                        closeImageModal();
                    }
                    if (!document.getElementById('successModal').classList.contains('hidden')) {
                        closeSuccessModal();
                    }
                }
            });
        });
    </script>
</body>
</html>
